<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lj.dao.UserInfDao">

    <select id="findAll" resultType="User_inf" >
        select * from user_inf
        <if test=" nameSearch != null and nameSearch != '' ">
           where  user_inf.username  like CONCAT('%',#{nameSearch} ,'%')
        </if>
    </select>
    <select id="findByUserName" resultType="user_inf">
        select username,password,id,login_name from user_inf where login_name=#{login_name}
    </select>
    <select id="login" resultType="user_inf">
        select * from user_inf where login_name=#{login_name} and password=#{password}
    </select>
    <select id="queryUserByName" resultType="User_inf">
        select *  from user_inf;
    </select>
    <select id="findOne" resultType="User_inf" parameterType="INT">
      select * from user_inf where id=#{id}
    </select>
    <insert id="add" parameterType="User_inf"  >
--
--      配置插入操作后，获取插入数据的id； 属性（对应实体类）        id（表）      结果集类型     命令执行顺序
                            <selectKey keyProperty="id" keyColumn="id" resultType="int" order="AFTER">
                                select  last_insert_id();
                            </selectKey>
            insert into user_inf(username,login_name,password) values(#{username},#{login_name},#{password})
    </insert>
    <!-- 删除用户-->
    <delete id="deleteById" parameterType="INT">
       delete  from user_inf where id=#{id}
    </delete>
    <!--更新用户 -->
    <update id="update" parameterType="User_inf">
      update user_inf set username=#{username},login_name=#{login_name},password=#{password}  where id=#{id}
    </update>
</mapper>